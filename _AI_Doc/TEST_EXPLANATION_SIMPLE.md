# 테스트가 정확히 뭐하는 건가요?

> **쉬운 설명:** 앱을 출시하기 전에 버그를 미리 찾는 작업  
> **목적:** 사용자가 앱 사용 중 에러를 만나지 않게 하기

---

## 🤔 테스트가 왜 필요한가요?

### 테스트 없이 출시하면?
```
사용자: 주소 검색해야지...
앱: [앱 강제 종료] 💥
사용자: 뭐야! 이 앱 삭제! ⭐☆☆☆☆
```

### 테스트 하고 출시하면?
```
개발자: 테스트 실행...
테스트: ❌ 주소 검색 시 빈 입력 오류 발견!
개발자: 수정 완료 ✅
───────────────────────
사용자: 주소 검색해야지...
앱: ✅ 정상 작동!
사용자: 좋은 앱이네! ⭐⭐⭐⭐⭐
```

**결론:** 테스트 = 사용자가 겪을 버그를 미리 찾아서 수정

---

## 📝 테스트 5가지 종류

# 1. Unit Test (단위 테스트)

## 이게 뭔가요?
**작은 기능 하나하나를 따로 테스트**

비유:
```
자동차를 만들 때
- 엔진만 따로 테스트
- 브레이크만 따로 테스트
- 핸들만 따로 테스트
```

## 우리 앱에서는?
**함수 하나하나를 따로 테스트**

### 예시 1: 주소 파싱 테스트
```dart
// 테스트할 함수
String extractDong(String address) {
  // "211동 1506호" → "211" 추출
}

// 테스트 코드
test('동 번호 추출 테스트', () {
  final result = extractDong('211동 1506호');
  
  // 확인: 결과가 "211"이 맞나?
  expect(result, '211'); // ✅ 맞으면 통과, ❌ 다르면 실패
});
```

**실제로 테스트할 것:**
```
✅ 주소 파싱: "경기도 성남시..." → 시도, 시군구, 도로명 분리
✅ 소유자 추출: 등기부등본 데이터 → 소유자 이름 찾기
✅ 데이터 저장: Property 객체 → Map 변환
✅ 날짜 포맷: "2024-11-01" → "2024년 11월 1일"
```

**왜 필요?**
- 함수가 제대로 동작하는지 확인
- 나중에 코드 수정해도 여전히 작동하는지 확인
- 버그를 빨리 찾을 수 있음

⏱️ **소요:** 3-4시간 (10개 함수 테스트)  
💡 **난이도:** ⭐⭐☆☆☆ (쉬움)

---

# 2. Widget Test (위젯 테스트)

## 이게 뭔가요?
**화면 요소(버튼, 입력창 등)가 제대로 나오는지 테스트**

비유:
```
TV 리모컨을 테스트할 때
- 전원 버튼 눌렀을 때 반응하나?
- 채널 버튼 눌렀을 때 숫자 바뀌나?
- 화면에 메뉴가 제대로 나오나?
```

## 우리 앱에서는?
**버튼, 입력창, 메시지가 제대로 나오고 작동하는지**

### 예시: 로그인 화면 테스트
```dart
test('로그인 버튼이 화면에 있나?', () {
  // 1. 로그인 화면 띄우기
  await tester.pumpWidget(LoginPage());
  
  // 2. "로그인" 버튼 찾기
  final loginButton = find.text('로그인');
  
  // 3. 확인: 버튼이 1개 있나?
  expect(loginButton, findsOneWidget); // ✅ 있으면 통과
});

test('빈 이메일로 로그인하면 에러 나오나?', () {
  // 1. 로그인 화면 띄우기
  await tester.pumpWidget(LoginPage());
  
  // 2. 이메일 입력창에 아무것도 안 쓰고
  // 3. 로그인 버튼 클릭
  await tester.tap(find.text('로그인'));
  await tester.pump();
  
  // 4. 확인: "이메일을 입력해주세요" 에러 나오나?
  expect(find.text('이메일을 입력해주세요'), findsOneWidget); // ✅
});
```

**실제로 테스트할 것:**
```
✅ 로그인 화면: 버튼, 입력창이 있나?
✅ 주소 검색창: 입력하면 검색되나?
✅ 에러 메시지: 에러 발생 시 메시지 나오나?
✅ 공인중개사 카드: 정보가 제대로 표시되나?
```

**왜 필요?**
- 화면이 깨지지 않고 제대로 나오는지 확인
- 버튼 클릭 시 반응하는지 확인
- 사용자가 보는 화면 품질 보장

⏱️ **소요:** 2-3시간 (5개 화면 테스트)  
💡 **난이도:** ⭐⭐☆☆☆ (쉬움)

---

# 3. Integration Test (통합 테스트 / E2E)

## 이게 뭔가요?
**실제 사용자처럼 앱 전체 과정을 테스트**

비유:
```
자동차 테스트할 때
- 엔진만 테스트 (Unit) ❌
- 핸들만 테스트 (Widget) ❌
- 시동 → 운전 → 주차까지 전체 과정 테스트 ✅
```

## 우리 앱에서는?
**회원가입부터 공인중개사 찾기까지 전체 플로우 자동 테스트**

### 예시: 신규 사용자 전체 플로우
```dart
test('회원가입 → 주소 검색 → 공인중개사 찾기 (전체)', () async {
  // 1. 앱 실행
  await tester.pumpWidget(MyApp());
  
  // 2. "회원가입" 버튼 클릭
  await tester.tap(find.text('회원가입'));
  await tester.pumpAndSettle();
  
  // 3. 정보 입력
  await tester.enterText(find.byKey(Key('email')), 'test@example.com');
  await tester.enterText(find.byKey(Key('password')), 'Test123!');
  
  // 4. 가입하기 버튼 클릭
  await tester.tap(find.text('가입하기'));
  await tester.pumpAndSettle(Duration(seconds: 3));
  
  // 5. 메인 페이지로 이동 확인
  expect(find.text('내집팔기'), findsOneWidget);
  
  // 6. 주소 검색
  await tester.enterText(find.byType(TextField), '성남시 분당구');
  await tester.pumpAndSettle(Duration(seconds: 2));
  
  // 7. 첫 번째 주소 선택
  await tester.tap(find.byType(ListTile).first);
  await tester.pumpAndSettle();
  
  // 8. "조회하기" 버튼 클릭
  await tester.tap(find.text('조회하기'));
  await tester.pumpAndSettle(Duration(seconds: 5));
  
  // 9. "공인중개사 찾기" 버튼 클릭
  await tester.tap(find.text('공인중개사 찾기'));
  await tester.pumpAndSettle(Duration(seconds: 3));
  
  // 10. 공인중개사 목록이 나왔는지 확인
  expect(find.byType(GridView), findsOneWidget); // ✅
});
```

**실제로 테스트할 시나리오:**
```
시나리오 1: 회원가입 → 주소 검색 → 공인중개사 찾기
시나리오 2: 로그인 → 부동산 조회 → 견적 요청
시나리오 3: 공인중개사 답변 링크 접속 → 답변 작성
```

**왜 필요?**
- 실제 사용자가 사용하는 전체 과정이 정상 작동하는지 확인
- 여러 기능이 함께 작동할 때 문제 없는지 확인

⏱️ **소요:** 1-2일 (3개 시나리오)  
💡 **난이도:** ⭐⭐⭐☆☆ (중간)

---

# 4. Android 실제 기기 테스트

## 이게 뭔가요?
**실제 Android 폰에 앱 설치해서 직접 사용해보기**

## 왜 컴퓨터에서만 테스트하면 안 되나요?
```
컴퓨터 (에뮬레이터):
- 빠르고 편함 ✅
- 하지만 실제 폰과 다름 ⚠️
  * 터치 감도 다름
  * 화면 크기 다름
  * 성능 다름
  * 센서(GPS, 카메라) 없음

실제 폰:
- 사용자가 실제로 사용할 환경
- 진짜 버그를 찾을 수 있음
```

## 테스트 내용

### 준비물
```
📱 Galaxy A32 (5.5인치, Android 11)
📱 Galaxy S21 (6.2인치, Android 13)
📱 Galaxy Tab (10.1인치, Android 12)
```

### 테스트 체크리스트

**1. 기본 동작 (30분/기기)**
```
✅ 앱 설치 가능한가?
✅ 앱 실행 되나?
✅ 모든 화면 제대로 나오나?
✅ 버튼 눌렀을 때 반응하나?
✅ 한글 입력 되나?
✅ 스크롤 부드러운가?
```

**2. 핵심 기능 (1시간/기기)**
```
✅ 회원가입 → 성공?
✅ 로그인 → 성공?
✅ 주소 검색 → 결과 나오나?
✅ 공인중개사 찾기 → 목록 나오나?
✅ 전화 걸기 버튼 → 전화 앱 실행되나?
✅ 지도 연동 → 지도 앱 열리나?
✅ 견적 요청 → Firebase에 저장되나?
```

**3. 권한 테스트 (30분/기기)**
```
✅ 위치 권한 요청 뜨나?
✅ 전화 권한 요청 뜨나?
✅ 권한 거부하면 어떻게 되나?
```

**4. 예외 상황 (30분/기기)**
```
✅ 네트워크 끊었을 때 → 에러 메시지 나오나?
✅ 앱 최소화 → 다시 열었을 때 → 상태 유지되나?
✅ 뒤로 가기 버튼 → 제대로 이전 화면으로?
```

**실제 예시:**
```
개발자가 Galaxy S21에 앱 설치
→ 회원가입 시도
→ 한글 입력이 깨짐 발견! ❌
→ 수정
→ 다시 테스트
→ 정상 작동 확인 ✅
```

⏱️ **소요:** 1일 (3개 기기 × 2-3시간)  
💡 **난이도:** ⭐⭐⭐☆☆ (중간)  
📱 **필요 장비:** Android 폰 3대

---

# 5. iOS 실제 기기 테스트

## 이게 뭔가요?
**실제 iPhone에 앱 설치해서 직접 사용해보기**

## Android와 뭐가 다른가요?
```
Android와 iOS는 완전히 다른 운영체제!

같은 코드여도:
- 화면이 다르게 보일 수 있음
- 버튼 동작이 다를 수 있음
- 권한 요청 방식이 다름
- 네이티브 기능(전화, 지도)이 다름
```

## 테스트 내용

### 준비물
```
📱 iPhone SE (4.7인치, iOS 15)
📱 iPhone 14 (6.1인치, iOS 17)
💻 Mac 컴퓨터 (iOS 앱 빌드 필수!)
```

### 테스트 체크리스트

**1. iOS 특화 테스트 (1시간/기기)**
```
✅ Safe Area 처리 (노치 대응)
✅ Face ID / Touch ID 지원
✅ iOS 제스처 (swipe back)
✅ Apple Maps 연동
✅ iOS 네이티브 전화 앱 연동
```

**2. 나머지는 Android와 동일**
```
✅ 회원가입/로그인
✅ 주소 검색
✅ 공인중개사 찾기
✅ 견적 요청
✅ 권한 테스트
✅ 예외 상황
```

**실제 예시:**
```
개발자가 iPhone 14에 앱 설치
→ 상단 노치 부분에 텍스트가 가려짐 발견! ❌
→ Safe Area 처리 추가
→ 다시 테스트
→ 정상 표시 확인 ✅
```

⏱️ **소요:** 1일 (2개 기기 × 3-4시간)  
💡 **난이도:** ⭐⭐⭐⭐☆ (어려움)  
🍎 **필요 장비:** iPhone 2대 + Mac

---

## 🆚 테스트 비교표

| 테스트 종류 | 뭘 테스트? | 어떻게? | 누가? |
|-----------|----------|---------|-------|
| **Unit Test** | 함수 하나하나 | 코드로 자동 | 컴퓨터 |
| **Widget Test** | 화면 요소 | 코드로 자동 | 컴퓨터 |
| **Integration Test** | 전체 플로우 | 코드로 자동 | 컴퓨터 |
| **Android 실기** | 모든 것 | 직접 손으로 | 사람 👤 |
| **iOS 실기** | 모든 것 | 직접 손으로 | 사람 👤 |

---

## 💡 쉬운 비유

### 케이크를 만들 때

**Unit Test = 재료 하나하나 확인**
```
✅ 계란 신선한가?
✅ 밀가루 상했나?
✅ 설탕 분량 맞나?
```

**Widget Test = 만드는 과정 확인**
```
✅ 반죽 제대로 섞였나?
✅ 오븐 온도 맞나?
✅ 구워진 모양 괜찮나?
```

**Integration Test = 전체 레시피 따라하기**
```
✅ 레시피 1단계부터 끝까지 자동으로 실행
✅ 완성된 케이크 나오나?
```

**실제 기기 테스트 = 맛보기**
```
✅ 사람이 직접 먹어보기
✅ 맛, 향, 식감 확인
✅ 진짜 맛있는지 최종 확인
```

---

## 🎯 실제 작업 예시

### 1. Unit Test 작성 (30분)

**파일 생성:**
```
test/utils/address_parser_test.dart
```

**코드 작성:**
```dart
import 'package:flutter_test/flutter_test.dart';
import 'package:property/utils/address_parser.dart';

void main() {
  test('주소 파싱 테스트', () {
    // 테스트할 주소
    final address = '경기도 성남시 분당구 중앙공원로 54';
    
    // 함수 실행
    final result = AddressParser.parseAddress1st(address);
    
    // 결과 확인
    expect(result['sido'], '경기도');          // ✅ 맞나?
    expect(result['sigungu'], '성남시 분당구'); // ✅ 맞나?
    expect(result['roadName'], '중앙공원로');   // ✅ 맞나?
    expect(result['buildingNumber'], '54');    // ✅ 맞나?
  });
}
```

**실행:**
```bash
flutter test test/utils/address_parser_test.dart
```

**결과:**
```
✅ PASS: 주소 파싱 테스트
또는
❌ FAIL: buildingNumber가 "54"가 아니라 ""임
  → 버그 발견! → 코드 수정 → 다시 테스트
```

---

### 2. Widget Test 작성 (30분)

**파일 생성:**
```
test/widgets/login_page_test.dart
```

**코드 작성:**
```dart
import 'package:flutter_test/flutter_test.dart';
import 'package:property/screens/login_page.dart';

void main() {
  testWidgets('로그인 버튼 클릭 테스트', (tester) async {
    // 1. 로그인 화면 띄우기
    await tester.pumpWidget(MaterialApp(home: LoginPage()));
    
    // 2. 버튼이 있는지 확인
    expect(find.text('로그인'), findsOneWidget);
    
    // 3. 버튼 클릭
    await tester.tap(find.text('로그인'));
    await tester.pump();
    
    // 4. 에러 메시지 나오는지 확인
    expect(find.text('이메일을 입력해주세요'), findsOneWidget);
  });
}
```

---

### 3. Android 실제 기기 테스트 (2시간/기기)

**준비:**
```bash
# 1. APK를 폰에 설치
adb install app-arm64-v8a-release.apk
```

**테스트 과정:**
```
👤 테스터가 직접 폰으로:

1. 앱 아이콘 터치 → 실행되나?
2. "회원가입" 터치 → 화면 이동되나?
3. 키보드로 "test@example.com" 입력 → 한글 깨지나?
4. "가입하기" 터치 → 로딩 나오나? → 성공하나?
5. 주소 검색 → 결과 나오나?
6. 공인중개사 카드 터치 → 상세 정보 나오나?
7. "전화문의" 터치 → 전화 앱 열리나?
8. 전화 걸어지나?
...

30분-1시간 동안 모든 기능 직접 사용
→ 버그 발견 시 기록
```

**발견 가능한 버그 예시:**
```
❌ Galaxy A32에서 화면이 잘림
❌ 한글 입력 시 앱 느려짐
❌ 뒤로 가기 두 번 누르면 앱 종료
❌ 전화 권한 없으면 앱 크래시
```

---

### 4. iOS 실제 기기 테스트 (3시간/기기)

**준비 (Mac 필요):**
```bash
# 1. Xcode에서 빌드
flutter build ios --release

# 2. Xcode에서 iPhone에 설치
# (복잡함 - Mac과 케이블 필요)
```

**테스트 과정:**
- Android와 동일하게 모든 기능 직접 사용
- 추가로 iOS 특화 기능 테스트

---

## 📊 테스트 효과

### 테스트 안 하고 출시
```
Day 1: 출시! 🎉
Day 2: 별점 ⭐☆☆☆☆ (앱이 자꾸 꺼져요)
Day 3: 앱 삭제 급증 📉
Day 4: 긴급 수정... 😰
```

### 테스트 하고 출시
```
Day -7 ~ -1: 테스트 진행
  → 버그 50개 발견 및 수정
  
Day 1: 출시! 🎉
Day 2: 별점 ⭐⭐⭐⭐⭐ (편리해요!)
Day 3: 다운로드 증가 📈
Day 4: 안정적인 운영 😊
```

---

## ✅ 우리 프로젝트에 필요한 테스트

### 필수 (출시 전 꼭 해야 함)
```
✅ Android 실제 기기 테스트 (1일)
  → 최소 1개 기기라도 필수!
  
✅ 핵심 기능 수동 테스트 (3시간)
  → 회원가입, 로그인, 주소 검색, 공인중개사
```

### 권장 (품질 향상)
```
✅ Unit Test 10개 (4시간)
  → 주요 함수 안정성
  
✅ Widget Test 5개 (3시간)
  → 화면 안정성
```

### 선택 (완벽을 원한다면)
```
✅ Integration Test (2일)
  → 전체 플로우 자동화
  
✅ iOS 실제 기기 (1일)
  → iPhone 사용자 대응
```

---

## 💰 비용 비교

### 테스트 안 함
```
개발 시간: 0일
비용: 0원
───────────
출시 후:
- 버그 수정: 10일
- 사용자 이탈: 1,000명
- 평점 회복: 불가능
```

### 테스트 함
```
개발 시간: 2-3일
비용: 인건비
───────────
출시 후:
- 버그: 거의 없음
- 사용자 만족도: 높음
- 평점: ⭐⭐⭐⭐⭐
```

---

## 🎯 결론

### 테스트는 뭐하는 거?
**→ 사용자보다 먼저 앱을 써보고 버그를 찾아서 수정하는 것**

### 꼭 해야 하나?
**→ 최소한 Android 실제 기기 테스트는 필수!**

### 언제 하나?
**→ 출시 직전 (지금!)**

### 누가 하나?
```
자동 테스트 (Unit, Widget, Integration):
  → 컴퓨터가 자동으로 (코드 작성 필요)
  
실제 기기 테스트:
  → 사람이 직접 (기기 필요)
```

---

## 📋 최소 필수 테스트 (하루 안에 가능)

```
아침 (2시간): 
✅ Android 폰 1대로 모든 기능 직접 테스트

오후 (2시간):
✅ 발견한 버그 수정

저녁 (1시간):
✅ 다시 테스트해서 확인

────────────────
총 5시간 투자 → 안전하게 출시!
```

---

**핵심:**
테스트 = 사용자가 불편 겪기 전에 우리가 먼저 찾아서 고치는 것! 🔍

---

**작성자:** AI Assistant  
**작성일:** 2024-11-01



