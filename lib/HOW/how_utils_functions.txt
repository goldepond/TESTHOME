# ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ìƒì„¸ ë¶„ì„

## ğŸ”§ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì „ì²´ êµ¬ì¡°

### 1. ì£¼ì†Œ íŒŒì‹± ìœ í‹¸ë¦¬í‹° (AddressParser)

#### 1.1 1ì°¨ ì£¼ì†Œ íŒŒì‹± í•¨ìˆ˜ (lib/utils/address_parser.dart ë¼ì¸ 4-50)
```dart
// 1ì°¨ ì£¼ì†Œ íŒŒì‹±: ì‹œ/ë„, ì‹œêµ°êµ¬, ë„ë¡œëª…, ê±´ë¬¼ë²ˆí˜¸ ë¶„ë¦¬
static Map<String, String> parseAddress1st(String address) {
  // RegionConstants.sidoSigunguMapì—ì„œ ì‹œ/ë„ ë§¤ì¹­
  for (final entry in RegionConstants.sidoSigunguMap.entries) {
    final sido = entry.key;                          // ì‹œ/ë„ëª… (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ")
    
    if (address.startsWith(sido)) {                  // ì£¼ì†Œê°€ í•´ë‹¹ ì‹œ/ë„ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
      // ì‹œ/ë„ ì´í›„ ë¬¸ìì—´ ì¶”ì¶œ
      String remain = address.substring(sido.length).trim();
      
      // ì‹œêµ°êµ¬ ëª©ë¡ ì¤‘ ê°€ì¥ ê¸´(2ë‹¨ê³„ í¬í•¨) sigunguë¥¼ ë¨¼ì € ì°¾ìŒ
      final sortedSigungu = List<String>.from(entry.value)
        ..sort((a, b) => b.length.compareTo(a.length));  // ê¸¸ì´ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
      
      String? foundSigungu;
      for (final sigungu in sortedSigungu) {
        if (remain.startsWith(sigungu)) {            // ì‹œêµ°êµ¬ ë§¤ì¹­
          foundSigungu = sigungu;
          break;
        }
      }
      
      if (foundSigungu != null) {
        // ì‹œêµ°êµ¬ ì´í›„ ë¬¸ìì—´ ì¶”ì¶œ
        String roadRemain = remain.substring(foundSigungu.length).trim();
        
        // ë„ë¡œëª…ê³¼ ê±´ë¬¼ë²ˆí˜¸ ë¶„ë¦¬ (ì •ê·œì‹ ì‚¬ìš©)
        // ì˜ˆ: 'ì¤‘ì•™ê³µì›ë¡œ 54 (ì„œí˜„ë™, ì‹œë²”ë‹¨ì§€ìš°ì„±ì•„íŒŒíŠ¸)'
        final reg = RegExp(r'^(.*?)(\d+)(?=\s|\(|$)');  // ë„ë¡œëª… + ìˆ«ì íŒ¨í„´
        final match = reg.firstMatch(roadRemain);
        
        String roadName = '';
        String buildingNumber = '';
        
        if (match != null) {
          roadName = match.group(1)?.trim() ?? '';   // ë„ë¡œëª… (ê·¸ë£¹ 1)
          buildingNumber = match.group(2) ?? '';     // ê±´ë¬¼ë²ˆí˜¸ (ê·¸ë£¹ 2)
        } else {
          roadName = roadRemain;                     // ë§¤ì¹­ë˜ì§€ ì•Šìœ¼ë©´ ì „ì²´ë¥¼ ë„ë¡œëª…ìœ¼ë¡œ
        }
        
        // íŒŒì‹± ê²°ê³¼ ë°˜í™˜
        return {
          'sido': sido,                              // ì‹œ/ë„
          'sigungu': foundSigungu,                   // ì‹œêµ°êµ¬
          'roadName': roadName,                      // ë„ë¡œëª…
          'buildingNumber': buildingNumber,          // ê±´ë¬¼ë²ˆí˜¸
        };
      } else {
        // ì‹œêµ°êµ¬ê°€ ì—†ëŠ” ì‹œ/ë„(ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ ë“±)
        return {
          'sido': sido,
          'sigungu': '',
          'roadName': remain,
          'buildingNumber': '',
        };
      }
    }
  }
  
  // ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ fallback
  return {
    'sido': '',
    'sigungu': '',
    'roadName': address,
    'buildingNumber': '',
  };
}
```

#### 1.2 2ì°¨ ìƒì„¸ì£¼ì†Œ íŒŒì‹± í•¨ìˆ˜ (lib/utils/address_parser.dart ë¼ì¸ 52-80)
```dart
// 2ì°¨ ìƒì„¸ì£¼ì†Œ íŒŒì‹±: ë™/í˜¸ ë¶„ë¦¬
static Map<String, String> parseDetailAddress(String detail) {
  String dong = '';
  String ho = '';
  
  // ë¹ˆ ë¬¸ìì—´ ì²´í¬
  if (detail.trim().isEmpty) {
    return {'dong': '', 'ho': ''};
  }
  
  // "ì œ211ë™ ì œ15,16ì¸µ ì œ1506í˜¸" í˜•ì‹ íŒŒì‹±
  final reg = RegExp(r'ì œ(\d+ë™)\s*ì œ(\d+,\d+ì¸µ)?\s*ì œ(\d+í˜¸)?');
  final match = reg.firstMatch(detail.trim());
  
  if (match != null) {
    // ë§¤ì¹­ëœ ê²½ìš°
    dong = 'ì œ${match.group(1)} ${match.group(2) ?? ''}'.trim();  // ë™ + ì¸µ ì •ë³´
    ho = 'ì œ${match.group(3) ?? ''}'.trim();                      // í˜¸ ì •ë³´
  } else {
    // ê¸°ì¡´ í˜•ì‹ë„ ì§€ì› (ê°„ë‹¨í•œ í˜•ì‹)
    final simpleReg = RegExp(r'(\d+ë™)?\s*(\d+í˜¸)?');
    final simpleMatch = simpleReg.firstMatch(detail.trim());
    
    if (simpleMatch != null) {
      dong = simpleMatch.group(1) ?? '';             // ë™ ì •ë³´
      ho = simpleMatch.group(2) ?? '';               // í˜¸ ì •ë³´
    }
  }
  
  return {
    'dong': dong,                                    // ë™ ì •ë³´
    'ho': ho,                                        // í˜¸ ì •ë³´
  };
}
```

#### 1.3 ì£¼ì†Œ íŒŒì‹± ì˜ˆì‹œ
```dart
// 1ì°¨ íŒŒì‹± ì˜ˆì‹œ
String address = "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë¡œ 123";
Map<String, String> result = AddressParser.parseAddress1st(address);
// ê²°ê³¼: {
//   'sido': 'ì„œìš¸íŠ¹ë³„ì‹œ',
//   'sigungu': 'ê°•ë‚¨êµ¬',
//   'roadName': 'ì—­ì‚¼ë¡œ',
//   'buildingNumber': '123'
// }

// 2ì°¨ íŒŒì‹± ì˜ˆì‹œ
String detail = "ì œ1ë™ ì œ101í˜¸";
Map<String, String> detailResult = AddressParser.parseDetailAddress(detail);
// ê²°ê³¼: {
//   'dong': 'ì œ1ë™',
//   'ho': 'ì œ101í˜¸'
// }
```

### 2. ì†Œìœ ì ì •ë³´ ì¶”ì¶œ ìœ í‹¸ë¦¬í‹° (OwnerParser)

#### 2.1 ì†Œìœ ì ì´ë¦„ ì¶”ì¶œ í•¨ìˆ˜ (lib/utils/owner_parser.dart ë¼ì¸ 1-92)
```dart
/// ë“±ê¸°ë¶€ë“±ë³¸ ë°ì´í„°ì—ì„œ ì†Œìœ ì ì´ë¦„ì„ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜
/// ë‹¤ì–‘í•œ íŒ¨í„´(ì†Œìœ ì: í™ê¸¸ë™, ì†Œìœ ì+í™ê¸¸ë™ ë“±) ì§€ì›
List<String> extractOwnerNames(Map<String, dynamic> entry) {
  final List<String> ownerNames = [];

  // 1. resRegistrationHisListì—ì„œ ì¶”ì¶œ (ë“±ê¸° ì´ë ¥)
  final registrationHisList = entry['resRegistrationHisList'] as List?;
  if (registrationHisList != null) {
    for (var item in registrationHisList) {
      if (item['resType'] == 'ê°‘êµ¬') {                // ê°‘êµ¬(ì†Œìœ ê¶Œ) ì •ë³´ë§Œ ì²˜ë¦¬
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null && contentsList.isNotEmpty) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null && detailList.isNotEmpty) {
              for (var detail in detailList) {
                final resContents = detail['resContents']?.toString() ?? '';
                
                // 2. ì†Œìœ ì íŒ¨í„´ ë§¤ì¹­
                if (resContents.contains('ì†Œìœ ì')) {
                  if (resContents.startsWith('ì†Œìœ ì+')) {
                    // "ì†Œìœ ì+í™ê¸¸ë™" í˜•ì‹
                    final parts = resContents.split('+');
                    if (parts.length > 1) {
                      final ownerName = parts[1].trim();
                      if (ownerName.isNotEmpty && !ownerNames.contains(ownerName)) {
                        ownerNames.add(ownerName);
                      }
                    }
                  } else if (resContents.startsWith('ì†Œìœ ì:')) {
                    // "ì†Œìœ ì: í™ê¸¸ë™" í˜•ì‹
                    final ownerName = resContents.substring(4).trim();
                    if (ownerName.isNotEmpty && !ownerNames.contains(ownerName)) {
                      ownerNames.add(ownerName);
                    }
                  }
                }
                
                // 3. ì§ì ‘ ë§¤ì¹­ íŒ¨í„´ (í…ŒìŠ¤íŠ¸ìš©)
                final namePatterns = ['ê¹€íƒœí˜•', 'ìœ¤ëª…í˜œ', 'ì „ê· ìµ'];
                for (var pattern in namePatterns) {
                  if (resContents.contains(pattern) && !ownerNames.contains(pattern)) {
                    ownerNames.add(pattern);
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  // 4. resRegistrationSumListì—ì„œë„ ì¶”ì¶œ (ë“±ê¸° ìš”ì•½)
  final registrationSumList = entry['resRegistrationSumList'] as List?;
  if (registrationSumList != null) {
    for (var item in registrationSumList) {
      if (item['resType'] == 'ê°‘êµ¬') {                // ê°‘êµ¬(ì†Œìœ ê¶Œ) ì •ë³´ë§Œ ì²˜ë¦¬
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null && contentsList.isNotEmpty) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null && detailList.isNotEmpty) {
              for (var detail in detailList) {
                final resContents = detail['resContents']?.toString() ?? '';
                
                // 5. ë™ì¼í•œ ì†Œìœ ì íŒ¨í„´ ë§¤ì¹­
                if (resContents.contains('ì†Œìœ ì')) {
                  if (resContents.startsWith('ì†Œìœ ì+')) {
                    final parts = resContents.split('+');
                    if (parts.length > 1) {
                      final ownerName = parts[1].trim();
                      if (ownerName.isNotEmpty && !ownerNames.contains(ownerName)) {
                        ownerNames.add(ownerName);
                      }
                    }
                  } else if (resContents.startsWith('ì†Œìœ ì:')) {
                    final ownerName = resContents.substring(4).trim();
                    if (ownerName.isNotEmpty && !ownerNames.contains(ownerName)) {
                      ownerNames.add(ownerName);
                    }
                  }
                }
                
                // 6. ì§ì ‘ ë§¤ì¹­ íŒ¨í„´ (í…ŒìŠ¤íŠ¸ìš©)
                final namePatterns = ['ê¹€íƒœí˜•', 'ìœ¤ëª…í˜œ', 'ì „ê· ìµ'];
                for (var pattern in namePatterns) {
                  if (resContents.contains(pattern) && !ownerNames.contains(pattern)) {
                    ownerNames.add(pattern);
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  return ownerNames;                                  // ì¶”ì¶œëœ ì†Œìœ ì ì´ë¦„ ëª©ë¡ ë°˜í™˜
}
```

#### 2.2 ì†Œìœ ì ì¶”ì¶œ ì˜ˆì‹œ
```dart
// ë“±ê¸°ë¶€ë“±ë³¸ ë°ì´í„° ì˜ˆì‹œ
Map<String, dynamic> entry = {
  'resRegistrationHisList': [
    {
      'resType': 'ê°‘êµ¬',
      'resContentsList': [
        {
          'resType2': '2',
          'resDetailList': [
            {'resContents': 'ì†Œìœ ì+ê¹€íƒœí˜•'},
            {'resContents': 'ë“±ê¸°ëª©ì : ì†Œìœ ê¶Œë³´ì¡´'},
          ],
        },
      ],
    },
  ],
};

List<String> owners = extractOwnerNames(entry);
// ê²°ê³¼: ['ê¹€íƒœí˜•']
```

### 3. ë“±ê¸°ë¶€ë“±ë³¸ íŒŒì‹± ìœ í‹¸ë¦¬í‹° (CurrentStateParser)

#### 3.1 ë°ì´í„° ëª¨ë¸ í´ë˜ìŠ¤ë“¤ (lib/utils/current_state_parser.dart ë¼ì¸ 1-60)
```dart
// ë¬¸ì„œ í—¤ë” ì •ë³´
class Header {
  final String publishNo;        // ë°œí–‰ë²ˆí˜¸
  final String publishDate;      // ë°œí–‰ì¼
  final String docTitle;         // ë¬¸ì„œì œëª©
  final String realtyDesc;       // ë¶€ë™ì‚° ì„¤ëª…
  final String officeName;       // ë“±ê¸°ì†Œëª…

  Header({
    required this.publishNo,
    required this.publishDate,
    required this.docTitle,
    required this.realtyDesc,
    required this.officeName,
  });
}

// ì†Œìœ ê¶Œ ì •ë³´
class Ownership {
  final String ownerRaw;         // ì†Œìœ ì ì›ë³¸ í…ìŠ¤íŠ¸
  final String ownerAddress;     // ì†Œìœ ì ì£¼ì†Œ
  final String ownerPhone;       // ì†Œìœ ì ì „í™”ë²ˆí˜¸
  final String ownerRegistrationNumber; // ì†Œìœ ì ì£¼ë¯¼ë²ˆí˜¸
  final String purpose;          // ë“±ê¸°ëª©ì 
  final String receipt;          // ì ‘ìˆ˜
  final String cause;            // ë“±ê¸°ì›ì¸

  Ownership({
    required this.ownerRaw,
    required this.ownerAddress,
    required this.ownerPhone,
    required this.ownerRegistrationNumber,
    required this.purpose,
    required this.receipt,
    required this.cause,
  });
}

// í† ì§€ ë©´ì  ì •ë³´
class LandArea {
  final String landPurpose;      // í† ì§€ ì§€ëª©
  final String landSize;         // í† ì§€ ë©´ì 

  LandArea({
    required this.landPurpose,
    required this.landSize,
  });
}

// ì¸µë³„ ì •ë³´
class FloorInfo {
  final String floorLabel;       // ì¸µ ë¼ë²¨
  final String area;             // ë©´ì 

  FloorInfo({
    required this.floorLabel,
    required this.area,
  });
}

// ê±´ë¬¼ ë©´ì  ì •ë³´
class BuildingArea {
  final String structure;        // ê±´ë¬¼ êµ¬ì¡°
  final String areaTotal;        // ì „ì²´ ë©´ì 
  final List<FloorInfo> floors;  // ì¸µë³„ ì •ë³´

  BuildingArea({
    required this.structure,
    required this.areaTotal,
    required this.floors,
  });
}

// ì €ë‹¹ê¶Œ ì •ë³´
class Lien {
  final String purpose;          // ëª©ì 
  final String mainText;         // ì£¼ìš” í…ìŠ¤íŠ¸

  Lien({
    required this.purpose,
    required this.mainText,
  });
}

// ì „ì²´ í˜„ì¬ ìƒíƒœ
class CurrentState {
  final Header header;           // í—¤ë” ì •ë³´
  final Ownership ownership;     // ì†Œìœ ê¶Œ ì •ë³´
  final LandArea land;           // í† ì§€ ì •ë³´
  final BuildingArea building;   // ê±´ë¬¼ ì •ë³´
  final List<Lien> liens;        // ì €ë‹¹ê¶Œ ì •ë³´

  CurrentState({
    required this.header,
    required this.ownership,
    required this.land,
    required this.building,
    required this.liens,
  });
}
```

#### 3.2 í—¬í¼ í•¨ìˆ˜ë“¤ (lib/utils/current_state_parser.dart ë¼ì¸ 60-130)
```dart
// í…ìŠ¤íŠ¸ ì •ì œ í•¨ìˆ˜
String clean(String text) {
  return text.trim().replaceAll(RegExp(r'\s+'), ' ');  // ì—°ì† ê³µë°± ì œê±°
}

// ì†Œìœ ì ì •ë³´ í•„í„°ë§
String filterOwnerRaw(String text) {
  // ì†Œìœ ì ê´€ë ¨ í‚¤ì›Œë“œ ì œê±°
  final patterns = [
    RegExp(r'ì†Œìœ ì\s*[:+]\s*'),
    RegExp(r'ì§€ë¶„\s*\d+/\d+'),
    RegExp(r'ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸\s*:\s*\d{6}-\d{7}'),
  ];
  
  String result = text;
  for (var pattern in patterns) {
    result = result.replaceAll(pattern, '');
  }
  
  return clean(result);
}

// ì£¼ìš” í…ìŠ¤íŠ¸ í•„í„°ë§
String filterMainText(String text) {
  // ë¶ˆí•„ìš”í•œ ì •ë³´ ì œê±°
  final patterns = [
    RegExp(r'ë“±ê¸°ëª©ì \s*:\s*'),
    RegExp(r'ì ‘ìˆ˜\s*:\s*'),
    RegExp(r'ë“±ê¸°ì›ì¸\s*:\s*'),
  ];
  
  String result = text;
  for (var pattern in patterns) {
    result = result.replaceAll(pattern, '');
  }
  
  return clean(result);
}

// ì ‘ë‘ì‚¬ë¡œ ìƒì„¸ ì •ë³´ ì°¾ê¸°
String findDetailByPrefix(String text, String prefix) {
  final lines = text.split('\n');
  for (var line in lines) {
    if (line.trim().startsWith(prefix)) {
      return line.trim().substring(prefix.length).trim();
    }
  }
  return '';
}

// í‚¤ì›Œë“œë¡œ ìƒì„¸ ì •ë³´ ì°¾ê¸°
String findDetailContains(String text, String keyword) {
  final lines = text.split('\n');
  for (var line in lines) {
    if (line.trim().contains(keyword)) {
      return line.trim();
    }
  }
  return '';
}

// ë‚ ì§œ í˜•ì‹ ë³€í™˜
String formatDate(String dateStr) {
  // ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ YYYY-MM-DDë¡œ ë³€í™˜
  final patterns = [
    RegExp(r'(\d{4})ë…„\s*(\d{1,2})ì›”\s*(\d{1,2})ì¼'),
    RegExp(r'(\d{4})-(\d{1,2})-(\d{1,2})'),
    RegExp(r'(\d{4})\.(\d{1,2})\.(\d{1,2})'),
  ];
  
  for (var pattern in patterns) {
    final match = pattern.firstMatch(dateStr);
    if (match != null) {
      final year = match.group(1);
      final month = match.group(2)!.padLeft(2, '0');
      final day = match.group(3)!.padLeft(2, '0');
      return '$year-$month-$day';
    }
  }
  
  return dateStr;  // ë³€í™˜ ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë°˜í™˜
}

// ë¶€ë™ì‚° ì„¤ëª… ì •ì œ
String cleanRealtyDesc(String desc) {
  // ê´„í˜¸ ì•ˆì˜ ë¶€ê°€ ì •ë³´ ì œê±°
  desc = desc.replaceAll(RegExp(r'\([^)]*\)'), '');
  // ì—°ì† ê³µë°± ì œê±°
  desc = desc.replaceAll(RegExp(r'\s+'), ' ');
  return desc.trim();
}
```

#### 3.3 ë©”ì¸ íŒŒì‹± í•¨ìˆ˜ (lib/utils/current_state_parser.dart ë¼ì¸ 132-303)
```dart
// ë“±ê¸°ë¶€ë“±ë³¸ í˜„ì¬ ìƒíƒœ íŒŒì‹± (ë©”ì¸ í•¨ìˆ˜)
CurrentState parseCurrentState(String jsonString) {
  try {
    final Map<String, dynamic> data = json.decode(jsonString);
    
    // 1. í—¤ë” ì •ë³´ íŒŒì‹±
    final header = _parseHeader(data);
    
    // 2. ì†Œìœ ê¶Œ ì •ë³´ íŒŒì‹±
    final ownership = _parseOwnership(data);
    
    // 3. í† ì§€ ì •ë³´ íŒŒì‹±
    final land = _parseLand(data);
    
    // 4. ê±´ë¬¼ ì •ë³´ íŒŒì‹±
    final building = _parseBuilding(data);
    
    // 5. ì €ë‹¹ê¶Œ ì •ë³´ íŒŒì‹±
    final liens = _parseLiens(data);
    
    return CurrentState(
      header: header,
      ownership: ownership,
      land: land,
      building: building,
      liens: liens,
    );
    
  } catch (e) {
    print('ë“±ê¸°ë¶€ë“±ë³¸ íŒŒì‹± ì˜¤ë¥˜: $e');
    // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ê°’ ë°˜í™˜
    return _getDefaultCurrentState();
  }
}

// í—¤ë” ì •ë³´ íŒŒì‹±
Header _parseHeader(Map<String, dynamic> data) {
  final entry = data['data']?['resRegisterEntriesList']?[0];
  if (entry == null) return _getDefaultHeader();
  
  return Header(
    publishNo: entry['resPublishNo']?.toString() ?? '',
    publishDate: formatDate(entry['resPublishDate']?.toString() ?? ''),
    docTitle: entry['resDocTitle']?.toString() ?? '',
    realtyDesc: cleanRealtyDesc(entry['resRealty']?.toString() ?? ''),
    officeName: entry['commCompetentRegistryOffice']?.toString() ?? '',
  );
}

// ì†Œìœ ê¶Œ ì •ë³´ íŒŒì‹±
Ownership _parseOwnership(Map<String, dynamic> data) {
  final entry = data['data']?['resRegisterEntriesList']?[0];
  if (entry == null) return _getDefaultOwnership();
  
  String ownerRaw = '';
  String ownerAddress = '';
  String ownerPhone = '';
  String ownerRegistrationNumber = '';
  String purpose = '';
  String receipt = '';
  String cause = '';
  
  // resRegistrationHisListì—ì„œ ì†Œìœ ê¶Œ ì •ë³´ ì¶”ì¶œ
  final hisList = entry['resRegistrationHisList'] as List?;
  if (hisList != null) {
    for (var item in hisList) {
      if (item['resType'] == 'ê°‘êµ¬') {
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null) {
              for (var detail in detailList) {
                final text = detail['resContents']?.toString() ?? '';
                
                if (text.contains('ì†Œìœ ì')) {
                  ownerRaw = filterOwnerRaw(text);
                } else if (text.contains('ë“±ê¸°ëª©ì ')) {
                  purpose = filterMainText(text);
                } else if (text.contains('ì ‘ìˆ˜')) {
                  receipt = formatDate(filterMainText(text));
                } else if (text.contains('ë“±ê¸°ì›ì¸')) {
                  cause = filterMainText(text);
                }
              }
            }
          }
        }
      }
    }
  }
  
  // resRegistrationSumListì—ì„œ ì†Œìœ ì ìƒì„¸ ì •ë³´ ì¶”ì¶œ
  final sumList = entry['resRegistrationSumList'] as List?;
  if (sumList != null) {
    for (var item in sumList) {
      if (item['resType'] == 'ì†Œìœ ì§€ë¶„í˜„í™©') {
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null) {
              for (var detail in detailList) {
                final text = detail['resContents']?.toString() ?? '';
                
                // ì£¼ë¯¼ë²ˆí˜¸ íŒ¨í„´ ë§¤ì¹­
                if (RegExp(r'\d{6}-\d{7}').hasMatch(text)) {
                  ownerRegistrationNumber = text;
                }
                // ì£¼ì†Œ íŒ¨í„´ ë§¤ì¹­ (ì‹œ/ë„/ì‹œêµ°êµ¬/ë™ í¬í•¨)
                else if (text.contains('ì‹œ') || text.contains('ë„') || text.contains('êµ¬')) {
                  ownerAddress = text;
                }
                // ì „í™”ë²ˆí˜¸ íŒ¨í„´ ë§¤ì¹­
                else if (RegExp(r'\d{3}-\d{3,4}-\d{4}').hasMatch(text)) {
                  ownerPhone = text;
                }
              }
            }
          }
        }
      }
    }
  }
  
  return Ownership(
    ownerRaw: ownerRaw,
    ownerAddress: ownerAddress,
    ownerPhone: ownerPhone,
    ownerRegistrationNumber: ownerRegistrationNumber,
    purpose: purpose,
    receipt: receipt,
    cause: cause,
  );
}

// í† ì§€ ì •ë³´ íŒŒì‹±
LandArea _parseLand(Map<String, dynamic> data) {
  final entry = data['data']?['resRegisterEntriesList']?[0];
  if (entry == null) return _getDefaultLand();
  
  String landPurpose = '';
  String landSize = '';
  
  // í† ì§€ ì •ë³´ ì¶”ì¶œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë” ë³µì¡í•œ ë¡œì§ í•„ìš”)
  final hisList = entry['resRegistrationHisList'] as List?;
  if (hisList != null) {
    for (var item in hisList) {
      if (item['resType'] == 'ê°‘êµ¬') {
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null) {
              for (var detail in detailList) {
                final text = detail['resContents']?.toString() ?? '';
                
                if (text.contains('ì§€ëª©')) {
                  landPurpose = findDetailByPrefix(text, 'ì§€ëª©');
                } else if (text.contains('ë©´ì ')) {
                  landSize = findDetailByPrefix(text, 'ë©´ì ');
                }
              }
            }
          }
        }
      }
    }
  }
  
  return LandArea(
    landPurpose: landPurpose,
    landSize: landSize,
  );
}

// ê±´ë¬¼ ì •ë³´ íŒŒì‹±
BuildingArea _parseBuilding(Map<String, dynamic> data) {
  final entry = data['data']?['resRegisterEntriesList']?[0];
  if (entry == null) return _getDefaultBuilding();
  
  String structure = '';
  String areaTotal = '';
  List<FloorInfo> floors = [];
  
  // ê±´ë¬¼ ì •ë³´ ì¶”ì¶œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë” ë³µì¡í•œ ë¡œì§ í•„ìš”)
  final hisList = entry['resRegistrationHisList'] as List?;
  if (hisList != null) {
    for (var item in hisList) {
      if (item['resType'] == 'ì„êµ¬') {  // ê±´ë¬¼ ì •ë³´ëŠ” ë³´í†µ ì„êµ¬ì— ìˆìŒ
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null) {
              for (var detail in detailList) {
                final text = detail['resContents']?.toString() ?? '';
                
                if (text.contains('êµ¬ì¡°')) {
                  structure = findDetailByPrefix(text, 'êµ¬ì¡°');
                } else if (text.contains('ë©´ì ')) {
                  areaTotal = findDetailByPrefix(text, 'ë©´ì ');
                } else if (text.contains('ì¸µ')) {
                  // ì¸µë³„ ì •ë³´ íŒŒì‹±
                  final floorMatch = RegExp(r'(\d+ì¸µ)\s*([\d.]+ã¡)').firstMatch(text);
                  if (floorMatch != null) {
                    floors.add(FloorInfo(
                      floorLabel: floorMatch.group(1) ?? '',
                      area: floorMatch.group(2) ?? '',
                    ));
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  
  return BuildingArea(
    structure: structure,
    areaTotal: areaTotal,
    floors: floors,
  );
}

// ì €ë‹¹ê¶Œ ì •ë³´ íŒŒì‹±
List<Lien> _parseLiens(Map<String, dynamic> data) {
  final entry = data['data']?['resRegisterEntriesList']?[0];
  if (entry == null) return [];
  
  List<Lien> liens = [];
  
  // ì €ë‹¹ê¶Œ ì •ë³´ ì¶”ì¶œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë” ë³µì¡í•œ ë¡œì§ í•„ìš”)
  final hisList = entry['resRegistrationHisList'] as List?;
  if (hisList != null) {
    for (var item in hisList) {
      if (item['resType'] == 'ì„êµ¬') {  // ì €ë‹¹ê¶Œì€ ë³´í†µ ì„êµ¬ì— ìˆìŒ
        final contentsList = item['resContentsList'] as List?;
        if (contentsList != null) {
          for (var content in contentsList) {
            final detailList = content['resDetailList'] as List?;
            if (detailList != null) {
              for (var detail in detailList) {
                final text = detail['resContents']?.toString() ?? '';
                
                if (text.contains('ì €ë‹¹ê¶Œ') || text.contains('ê·¼ì €ë‹¹ê¶Œ')) {
                  liens.add(Lien(
                    purpose: 'ì €ë‹¹ê¶Œ',
                    mainText: text,
                  ));
                }
              }
            }
          }
        }
      }
    }
  }
  
  return liens;
}
```

#### 3.4 ê¸°ë³¸ê°’ ë°˜í™˜ í•¨ìˆ˜ë“¤ (lib/utils/current_state_parser.dart ë¼ì¸ 305-350)
```dart
// ê¸°ë³¸ CurrentState ë°˜í™˜
CurrentState _getDefaultCurrentState() {
  return CurrentState(
    header: _getDefaultHeader(),
    ownership: _getDefaultOwnership(),
    land: _getDefaultLand(),
    building: _getDefaultBuilding(),
    liens: [],
  );
}

// ê¸°ë³¸ Header ë°˜í™˜
Header _getDefaultHeader() {
  return Header(
    publishNo: '',
    publishDate: '',
    docTitle: '',
    realtyDesc: '',
    officeName: '',
  );
}

// ê¸°ë³¸ Ownership ë°˜í™˜
Ownership _getDefaultOwnership() {
  return Ownership(
    ownerRaw: '',
    ownerAddress: '',
    ownerPhone: '',
    ownerRegistrationNumber: '',
    purpose: '',
    receipt: '',
    cause: '',
  );
}

// ê¸°ë³¸ LandArea ë°˜í™˜
LandArea _getDefaultLand() {
  return LandArea(
    landPurpose: '',
    landSize: '',
  );
}

// ê¸°ë³¸ BuildingArea ë°˜í™˜
BuildingArea _getDefaultBuilding() {
  return BuildingArea(
    structure: '',
    areaTotal: '',
    floors: [],
  );
}
```

### 4. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš© ì˜ˆì‹œ

#### 4.1 ì£¼ì†Œ íŒŒì‹± ì‚¬ìš© ì˜ˆì‹œ
```dart
// ì „ì²´ ì£¼ì†Œ íŒŒì‹±
String fullAddress = "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë¡œ 123 ì œ1ë™ ì œ101í˜¸";

// 1ì°¨ íŒŒì‹±
Map<String, String> address1st = AddressParser.parseAddress1st(fullAddress);
// ê²°ê³¼: {
//   'sido': 'ì„œìš¸íŠ¹ë³„ì‹œ',
//   'sigungu': 'ê°•ë‚¨êµ¬',
//   'roadName': 'ì—­ì‚¼ë¡œ',
//   'buildingNumber': '123'
// }

// 2ì°¨ íŒŒì‹±
Map<String, String> detail = AddressParser.parseDetailAddress("ì œ1ë™ ì œ101í˜¸");
// ê²°ê³¼: {
//   'dong': 'ì œ1ë™',
//   'ho': 'ì œ101í˜¸'
// }
```

#### 4.2 ë“±ê¸°ë¶€ë“±ë³¸ íŒŒì‹± ì‚¬ìš© ì˜ˆì‹œ
```dart
// ë“±ê¸°ë¶€ë“±ë³¸ JSON ë¬¸ìì—´
String registerJson = '{"data": {"resRegisterEntriesList": [{"resPublishNo": "2024-001", "resDocTitle": "ë“±ê¸°ë¶€ë“±ë³¸"}]}}';

// íŒŒì‹± ì‹¤í–‰
CurrentState currentState = parseCurrentState(registerJson);

// ê²°ê³¼ ì‚¬ìš©
print('ë¬¸ì„œë²ˆí˜¸: ${currentState.header.publishNo}');
print('ë¬¸ì„œì œëª©: ${currentState.header.docTitle}');
print('ì†Œìœ ì: ${currentState.ownership.ownerRaw}');
print('ê±´ë¬¼êµ¬ì¡°: ${currentState.building.structure}');
```

#### 4.3 ì†Œìœ ì ì¶”ì¶œ ì‚¬ìš© ì˜ˆì‹œ
```dart
// ë“±ê¸°ë¶€ë“±ë³¸ ì—”íŠ¸ë¦¬ ë°ì´í„°
Map<String, dynamic> entry = {
  'resRegistrationHisList': [
    {
      'resType': 'ê°‘êµ¬',
      'resContentsList': [
        {
          'resDetailList': [
            {'resContents': 'ì†Œìœ ì+ê¹€íƒœí˜•'},
          ],
        },
      ],
    },
  ],
};

// ì†Œìœ ì ì¶”ì¶œ
List<String> owners = extractOwnerNames(entry);
print('ì†Œìœ ì: ${owners.join(", ")}');  // ì¶œë ¥: ì†Œìœ ì: ê¹€íƒœí˜•
```

### 5. ì„±ëŠ¥ ìµœì í™” ë° ê°œì„ ì‚¬í•­

#### 5.1 í˜„ì¬ êµ¬í˜„ì˜ ì¥ì 
1. **ì •ê·œì‹ í™œìš©**: íš¨ìœ¨ì ì¸ íŒ¨í„´ ë§¤ì¹­
2. **ì—ëŸ¬ ì²˜ë¦¬**: íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ ë°˜í™˜
3. **ëª¨ë“ˆí™”**: ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¦¬ëœ í•¨ìˆ˜ë“¤
4. **í™•ì¥ì„±**: ìƒˆë¡œìš´ íŒ¨í„´ ì¶”ê°€ ìš©ì´

#### 5.2 ê°œì„  ê°€ëŠ¥í•œ ë¶€ë¶„
1. **ìºì‹±**: ë™ì¼í•œ ì…ë ¥ì— ëŒ€í•œ ê²°ê³¼ ìºì‹±
2. **ë³‘ë ¬ ì²˜ë¦¬**: ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ë³‘ë ¬í™”
3. **ë©”ëª¨ë¦¬ ìµœì í™”**: ëŒ€ìš©ëŸ‰ JSON ì²˜ë¦¬ ìµœì í™”
4. **ì •í™•ë„ í–¥ìƒ**: ë” ì •êµí•œ íŒ¨í„´ ë§¤ì¹­
5. **ë¡œê¹…**: íŒŒì‹± ê³¼ì • ìƒì„¸ ë¡œê¹…

### 6. ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### 6.1 ì£¼ì†Œ ê²€ìƒ‰ ì‹œë‚˜ë¦¬ì˜¤
```
1. ì‚¬ìš©ì ì…ë ¥: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™"
2. AddressParser.parseAddress1st() í˜¸ì¶œ
3. ì‹œ/ë„, ì‹œêµ°êµ¬, ë„ë¡œëª…, ê±´ë¬¼ë²ˆí˜¸ ë¶„ë¦¬
4. API í˜¸ì¶œìš© ì£¼ì†Œ ì •ë³´ ìƒì„±
5. ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ìƒì„¸ì£¼ì†Œ ì„ íƒ
6. AddressParser.parseDetailAddress() í˜¸ì¶œ
7. ë™/í˜¸ ì •ë³´ ë¶„ë¦¬
8. ìµœì¢… ì£¼ì†Œ ì¡°í•©
```

#### 6.2 ë“±ê¸°ë¶€ë“±ë³¸ ì¡°íšŒ ì‹œë‚˜ë¦¬ì˜¤
```
1. ë“±ê¸°ë¶€ë“±ë³¸ API ì‘ë‹µ ìˆ˜ì‹ 
2. parseCurrentState() í˜¸ì¶œ
3. Header, Ownership, Land, Building, Lien ì •ë³´ íŒŒì‹±
4. extractOwnerNames() í˜¸ì¶œ
5. ì†Œìœ ì ì´ë¦„ ì¶”ì¶œ
6. ì‚¬ìš©ìì™€ ì†Œìœ ì ë¹„êµ
7. ê³„ì•½ì„œ ì‘ì„± ì‹œ íŒŒì‹±ëœ ì •ë³´ ìë™ ì…ë ¥
```

#### 6.3 ê³„ì•½ì„œ ì‘ì„± ì‹œë‚˜ë¦¬ì˜¤
```
1. ë“±ê¸°ë¶€ë“±ë³¸ ë°ì´í„° ë¡œë“œ
2. parseCurrentState() í˜¸ì¶œ
3. íŒŒì‹±ëœ ì •ë³´ë¥¼ ê³„ì•½ì„œ í¼ì— ìë™ ì…ë ¥
4. ì‚¬ìš©ì ì¶”ê°€ ì •ë³´ ì…ë ¥
5. ìµœì¢… ê³„ì•½ì„œ ë°ì´í„° ìƒì„±
6. PDF ìƒì„± ë° ì €ì¥
```

ì´ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì€ ì£¼ì†Œ íŒŒì‹±, ë“±ê¸°ë¶€ë“±ë³¸ íŒŒì‹±, ì†Œìœ ì ì •ë³´ ì¶”ì¶œ ë“± í•µì‹¬ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ë©°, ì•±ì˜ ì „ì²´ì ì¸ ë°ì´í„° ì²˜ë¦¬ íë¦„ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ê° í•¨ìˆ˜ëŠ” íŠ¹ì • ëª©ì ì— ë§ê²Œ ìµœì í™”ë˜ì–´ ìˆìœ¼ë©°, ì—ëŸ¬ ì²˜ë¦¬ì™€ í™•ì¥ì„±ì„ ê³ ë ¤í•œ ì„¤ê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 